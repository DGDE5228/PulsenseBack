import{c as S,j as k,n as E,o as O,v as I}from"./chunk-JCCMQLWG.js";import{A as w,B as C,C as y,F as v,G as P,y as x,z as _}from"./chunk-IDFAHQDE.js";import{Ca as b,E as d,H as c,J as h,Ja as M,V as t,W as n,aa as p,ja as r,la as u,ma as f,na as m}from"./chunk-7KVJ6OZD.js";import"./chunk-SGZQGHWM.js";import"./chunk-TAMHHTZL.js";import"./chunk-3WEH5MWB.js";import"./chunk-DBAIULDE.js";import"./chunk-A7AIC4LS.js";import"./chunk-T65MIE4K.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-FCVKYTBW.js";import"./chunk-REYR55MP.js";import"./chunk-GY7VVEAB.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var j=(()=>{let s=class s{constructor(e,a){this.http=e,this.router=a,this.username="",this.password="",this.errorMessage="",this.successMessage=""}login(){if(!this.username||!this.password){this.errorMessage="Debes llenar todos los campos",this.successMessage="";return}this.http.post("https://pulsenseback.onrender.com/login",{username:this.username,password:this.password}).subscribe({next:e=>{console.log("\u{1F4E6} Respuesta de login:",e),e&&e.success?(document.activeElement?.blur(),this.errorMessage="",this.successMessage="Inicio de sesi\xF3n exitoso",this.router.navigate(["/dashboard"])):(this.errorMessage=e.message||"Usuario o contrase\xF1a inv\xE1lidos",this.successMessage="")},error:e=>{console.error("\u274C Error en login:",e),this.errorMessage=e.error?.message||"Error del servidor",this.successMessage=""}})}register(){if(!this.username||!this.password){this.errorMessage="Debes llenar todos los campos para registrarte",this.successMessage="";return}this.http.post("https://pulsenseback.onrender.com/register",{username:this.username,password:this.password}).subscribe({next:e=>{e.success?(document.activeElement?.blur(),this.errorMessage="",this.successMessage="Usuario registrado correctamente",setTimeout(()=>{this.successMessage="",this.router.navigate(["/login"])},1200)):(this.errorMessage=e.message||"Error al registrar",this.successMessage="")},error:e=>{console.error("\u274C Error en registro:",e),this.errorMessage=e.error?.message||"Error del servidor",this.successMessage=""}})}};s.\u0275fac=function(a){return new(a||s)(c(b),c(M))},s.\u0275cmp=h({type:s,selectors:[["app-login"]],decls:19,vars:2,consts:[[1,"login-content"],[1,"login-wrapper"],["novalidate","",1,"login-card",3,"ngSubmit"],[1,"login-title"],[1,"login-subtitle"],[1,"input-item"],["position","floating"],["name","username","required","",3,"ngModelChange","ngModel"],["name","password","type","password","required","",3,"ngModelChange","ngModel"],["expand","block","type","submit",1,"login-button"],["expand","block","fill","clear",1,"register-button",3,"click"]],template:function(a,i){a&1&&(t(0,"ion-content",0)(1,"div",1)(2,"form",2),p("ngSubmit",function(){return i.login()}),t(3,"h2",3),r(4,"Bienvenido"),n(),t(5,"p",4),r(6,"Inicia sesi\xF3n"),n(),t(7,"ion-item",5)(8,"ion-label",6),r(9,"Usuario"),n(),t(10,"ion-input",7),m("ngModelChange",function(o){return f(i.username,o)||(i.username=o),o}),n()(),t(11,"ion-item",5)(12,"ion-label",6),r(13,"Contrase\xF1a"),n(),t(14,"ion-input",8),m("ngModelChange",function(o){return f(i.password,o)||(i.password=o),o}),n()(),t(15,"ion-button",9),r(16," Iniciar Sesi\xF3n "),n(),t(17,"ion-button",10),p("click",function(){return i.register()}),r(18," Crear Cuenta "),n()()()()),a&2&&(d(10),u("ngModel",i.username),d(4),u("ngModel",i.password))},dependencies:[P,y,x,_,v,C,w,k,I,S,E,O],styles:[".login-content[_ngcontent-%COMP%]{--background: linear-gradient(to bottom right, #e0f7fa, #ffffff);display:flex;justify-content:center;align-items:center;height:100%}.login-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;min-height:100vh;padding:16px}.login-card[_ngcontent-%COMP%]{background-color:#1797a6;border-radius:16px;box-shadow:0 10px 30px #0000001a;padding:32px 24px;width:100%;max-width:420px;display:flex;flex-direction:column;gap:20px;text-align:center}h2[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;color:#fff;font-size:30px}p[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;color:#fff;font-size:25px}ion-item[_ngcontent-%COMP%]{--background: transparent;font-size:22px;font-family:Arial,Helvetica,sans-serif;color:#fff;--color: #ffffff;border:none}ion-input[_ngcontent-%COMP%]{--background: #ffffff;--color: #000000;padding:8px;border-radius:8px}ion-button[_ngcontent-%COMP%]{width:100%;font-size:18px;--padding-start: 16px;--padding-end: 16px;--border-radius: 8px;--box-shadow: 0 4px 10px rgba(0, 0, 0, .2)}ion-button[_ngcontent-%COMP%]{display:block;width:100%;max-width:100%;margin:0 auto;font-size:18px;color:#000}ion-button[_ngcontent-%COMP%]::part(native){width:100%!important;display:block}.login-button[_ngcontent-%COMP%]{--background: #007bff;--color: #ffffff;--border-radius: 10px;margin-top:16px}.register-button[_ngcontent-%COMP%]{--background: transparent;--color: #ffffff;--border-radius: 10px;--border: 2px solid #ffffff;margin-top:8px}.register-button[_ngcontent-%COMP%]::part(native){border:2px solid white!important}"]});let l=s;return l})();export{j as LoginPage};
